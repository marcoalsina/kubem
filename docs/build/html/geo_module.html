

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Geo module &mdash; kubem 0.0.1a documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Utilities module" href="utils_module.html" />
    <link rel="prev" title="IO module" href="io_module.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/kubem_logo.svg" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">How to install</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="main_module.html">Main module</a></li>
<li class="toctree-l1"><a class="reference internal" href="io_module.html">IO module</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Geo module</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils_module.html">Utilities module</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">kubem</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Geo module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/geo_module.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-kubem.geo.geodata">
<span id="geo-module"></span><h1>Geo module<a class="headerlink" href="#module-kubem.geo.geodata" title="Permalink to this headline">¶</a></h1>
<p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">geo</span></code> module offers the following functions
to retrieve geodata for building records:</p>
<dl class="py function">
<dt id="kubem.geo.geodata.get_geodata">
<code class="sig-prename descclassname">kubem.geo.geodata.</code><code class="sig-name descname">get_geodata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataframe</span></em>, <em class="sig-param"><span class="n">geocoder</span><span class="o">=</span><span class="default_value">'Nominatim'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#kubem.geo.geodata.get_geodata" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves geodata for building records.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataframe</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – BE dataframe containing building records.</p></li>
<li><p><strong>geocoder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Geolocation service to use. Available options are ‘Nominatim’
or ‘Google’. The default is ‘Nominatim’.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>Index of rows whose addresses were not geocoded.</p></li>
<li><p>KBES dataframe with geodata. It will create or update the
following columns:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">latitude</span></code>: latitude of the building.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">longitude</span></code>: longitude of the building.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">building_ID</span></code>: open location code of the building.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">building_address</span></code>: standard building address.</p></li>
</ul>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">dataframe</span></code> is not a valid KBES dataframe.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><strong>ValueError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">geocoder</span></code> is not recognized.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Geocoding can be performed either through the Nominatim web
server of OpenStreetMaps (OSM), or the Google web server.
Latitude and longitude coordinates are given relative to the
WGS84 datum. The geocoder also provides the formatted building
address.</p>
<p>Nominatim can also be used to retrieved the building polygon.
If a polygon is not available, an alternative polygon will be
constructed based on building area and centered at the lat/long
coordinates.</p>
<p>Building ID is encoded following the
<a class="reference external" href="https://github.com/google/open-location-code">Open Location Code</a> (OLC).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Geocoding is a time consuming operation, since a delay of 1s
between calls is implemented to prevent rejection of requests
by the geocoding server.</p>
<p>Currently geocoding queries are configured to be retrieved in
Spanish language and within Chile (cl).</p>
<p>Building records whose addresses were not geocoded will be
deleted from <code class="docutils literal notranslate"><span class="pre">dataframe</span></code>.</p>
</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="utils_module.html" class="btn btn-neutral float-right" title="Utilities module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="io_module.html" class="btn btn-neutral float-left" title="IO module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, Kipus Software Team.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>